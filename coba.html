<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <style>
        body {
            background-color: black; /* Set background color to black */
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
        }
        #player {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clappr-chromecast-plugin@latest/dist/clappr-chromecast-plugin.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clappr-pip-plugin@latest/dist/clappr-pip-plugin.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/clappr/dash-shaka-playback@latest/dist/dash-shaka-playback.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/level-selector@0.2.0/dist/level-selector.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"></script>
    <script src="https://cdn.statically.io/gh/andrefilimono/clappr-flvjs-playback/377bd2be/dist/clappr-flvjs-playback.min.js"></script>
</head>
<body>
<!-- Container untuk pemutar video -->
<div id="player"></div>

<!-- Script untuk membangun pemutar video -->
<script>
    // Fungsi untuk membuat pemutar video saat halaman dimuat
    function createPlayer(videoURL, posterURL, watermarkURL) {
        var player = new Clappr.Player({
            source: videoURL,
            autoPlay: true,
            height: '100%',
            width: '100%',
            plugins: [DashShakaPlayback, FLVJSPlayback, LevelSelector, ChromecastPlugin, ClapprPIPPlugin],
            poster: posterURL,
            watermark: watermarkURL || '',
            position: 'top-right',
            parentId: '#player',
            shakaOnBeforeLoad: function(shaka_player) {
                // shaka_player.getNetworkingEngine().registerRequestFilter() ...
            },
            events: {
                onError: function(event) {
                    console.error("Error:", event);
                    // Jika terjadi kesalahan, alihkan pemutar ke video cadangan
                    player.load('https://github.com/vibetv/comingsoon/raw/main/allcomingsoon.mp4');
                }
            }
        });
    }

    // Ambil parameter dari URL untuk video, poster, dan watermark
    var urlParams = new URLSearchParams(window.location.search);
    var videoURL = urlParams.get('videoURL');
    var posterURL = urlParams.get('posterURL');
    var watermarkURL = urlParams.get('watermarkURL');

    // Buat pemutar video dengan parameter yang diambil
    createPlayer(videoURL, posterURL, watermarkURL);
</script>
</body>
</html>
